<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§  MCP Memory - Graphe & Ask</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="/static/css/graph.css">
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="header">
    <h1><span>ğŸ§ </span> MCP Memory</h1>
    <div class="controls">
        <select id="memorySelect"><option value="">-- MÃ©moire --</option></select>
        <button id="loadBtn" disabled>Charger</button>
        <div class="toggle-group"><input type="checkbox" id="showMentions"><label for="showMentions">MENTIONS</label></div>
        <div class="toggle-group"><input type="checkbox" id="showLabels"><label for="showLabels">Labels</label></div>
        <button class="btn-settings" id="settingsBtn">âš™ï¸</button>
        <button class="btn-settings" id="fitBtn" style="background:#2ecc71!important">ğŸ” Fit</button>
        <button class="btn-settings" id="askBtn" disabled style="background:#e67e22!important">ğŸ’¬ Ask</button>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MODALE PARAMÃˆTRES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="settingsModal">
    <div class="modal">
        <h2>âš™ï¸ ParamÃ¨tres</h2>
        <div class="param-group"><label>Distance (springLength)</label><div class="param-row"><input type="range" id="paramSpringLength" min="100" max="800" value="400"><span class="param-value" id="valSpringLength">400</span></div></div>
        <div class="param-group"><label>RÃ©pulsion (gravity)</label><div class="param-row"><input type="range" id="paramGravity" min="1000" max="50000" value="15000"><span class="param-value" id="valGravity">-15000</span></div></div>
        <div class="param-group"><label>Taille nÅ“uds</label><div class="param-row"><input type="range" id="paramNodeSize" min="10" max="50" value="20"><span class="param-value" id="valNodeSize">20</span></div></div>
        <div class="param-group"><label>Taille texte</label><div class="param-row"><input type="range" id="paramFontSize" min="8" max="20" value="11"><span class="param-value" id="valFontSize">11</span></div></div>
        <div class="modal-actions"><button class="btn-secondary" id="resetParams">Reset</button><button id="applyParams">Appliquer</button></div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LAYOUT PRINCIPAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="main">
    <!-- Sidebar -->
    <div class="sidebar">
        <h3>ğŸ“Š Stats</h3>
        <div class="stats">
            <div class="stat"><span>EntitÃ©s</span><span class="stat-value" id="nodeCount">-</span></div>
            <div class="stat"><span>Relations</span><span class="stat-value" id="edgeCount">-</span></div>
        </div>
        <h3>ğŸ¨ LÃ©gende</h3>
        <div id="legend"></div>
        <h3>ğŸ” Recherche</h3>
        <input type="text" id="searchInput" placeholder="Rechercher une entitÃ©â€¦">
        <h3>ğŸ·ï¸ Type</h3>
        <select id="typeFilter"><option value="">Tous</option></select>
        <h3>ğŸ“‹ EntitÃ©s</h3>
        <div class="entity-list" id="entityList"></div>
    </div>

    <!-- Zone graphe -->
    <div class="graph-container">
        <div id="graph"></div>
        <div class="loading" id="loading" style="display:none"><div class="spinner"></div><p>Chargementâ€¦</p></div>
        <div class="node-details" id="nodeDetails">
            <button class="node-details-close" onclick="hideNodeDetails()">âœ•</button>
            <div id="detailContent"></div>
        </div>

        <!-- Panneau ASK (en bas du graphe) -->
        <div class="ask-panel" id="askPanel">
            <div class="ask-header">
                <span>ğŸ’¬</span>
                <input type="text" id="askInput" placeholder="Posez une question sur cette mÃ©moireâ€¦">
                <button id="askSubmitBtn">Envoyer</button>
                <button class="ask-close" id="askCloseBtn">âœ•</button>
            </div>
            <div class="ask-body" id="askBody">
                <p style="color:#888;font-size:0.85rem">Posez une question en langage naturel. Les entitÃ©s trouvÃ©es seront mises en Ã©vidence dans le graphe.</p>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCRIPTS MODULAIRES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script src="/static/js/config.js"></script>
<script src="/static/js/api.js"></script>
<script src="/static/js/graph.js"></script>
<script src="/static/js/sidebar.js"></script>
<script src="/static/js/ask.js"></script>
<script src="/static/js/app.js"></script>

</body>
</html>
